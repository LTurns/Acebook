{"ast":null,"code":"var _jsxFileName = \"/Users/elizabethturney/Desktop/Acebook/my-app/src/components/posts.component.js\";\nimport React from 'react';\nimport $ from 'jquery';\nimport axios from 'axios';\nimport moment from 'moment';\nimport '../App.css';\nexport default class Posts extends React.Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = () => {\n      this.takeUserid();\n      console.log(this.state.firstName);\n      this.getBlogPost();\n    };\n\n    this.getBlogPost = () => {\n      axios.get('/api/posts').then(response => {\n        const data = response.data;\n        this.setState({\n          posts: data\n        });\n        console.log('Data has been received');\n      }).catch(() => {\n        console.log('Error');\n      });\n    };\n\n    this.handleChange = event => {\n      const target = event.target;\n      const name = target.name;\n      const value = target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.submit = event => {\n      event.preventDefault();\n      const {\n        match: {\n          params\n        }\n      } = this.props;\n      const post = {\n        message: this.state.post,\n        date: moment().format(\"YYYY-MM-DD HH:mm\"),\n        userId: params.id,\n        userName: this.state.firstName,\n        count: this.state.count\n      };\n      axios({\n        url: '/api/posts',\n        method: 'POST',\n        data: post\n      }).then(() => {\n        console.log('Data has been sent to there server');\n      }).finally(() => {\n        this.resetUserInputs();\n        this.getBlogPost();\n        this.displayPosts(this.state.posts);\n      }).catch(() => {\n        console.log('Error');\n      });\n    };\n\n    this.update = event => {\n      event.preventDefault();\n      this.setState({\n        isInEditMode: true\n      });\n      const post_id = {\n        id: event.target.dataset.id\n      };\n      axios({\n        url: '/api/posts/retrieve',\n        method: 'POST',\n        data: post_id\n      }).then(response => {\n        this.setState({\n          updateMessage: response.data.message,\n          updateID: response.data._id\n        });\n      }).catch(() => {\n        console.log('Error');\n      });\n    };\n\n    this.save = event => {\n      event.preventDefault();\n      this.setState({\n        isInEditMode: false\n      });\n      const post = {\n        id: this.state.updateID,\n        message: this.state.updateMessage,\n        date: moment().format(\"YYYY-MM-DD HH:mm\"),\n        userName: this.state.firstName,\n        count: this.state.count\n      };\n      axios({\n        url: '/api/posts/update',\n        method: 'POST',\n        data: post\n      }).then(response => {\n        console.log(response.data);\n      }).finally(() => {\n        this.resetUserInputs();\n        this.getBlogPost();\n        this.displayPosts(this.state.posts);\n      }).catch(() => {\n        console.log('Error');\n      });\n    };\n\n    this.delete = event => {\n      event.preventDefault();\n      const post_id = {\n        id: event.target.dataset.id\n      };\n      axios({\n        url: '/api/posts/delete',\n        method: 'POST',\n        data: post_id\n      }).then(() => {\n        console.log('Data has been sent to be deleted');\n      }).finally(() => {\n        this.getBlogPost();\n        this.displayPosts(this.state.posts);\n      }).catch(() => {\n        console.log('Error');\n      });\n    };\n\n    this.resetUserInputs = () => {\n      this.setState({\n        post: '',\n        updateMessage: '',\n        updateID: ''\n      });\n    };\n\n    this.displayPosts = posts => {\n      const {\n        match: {\n          params\n        }\n      } = this.props;\n      if (!posts.length) return null;\n      return posts.map((post, index) => /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        className: \"card shadow-sm p-3 mb-5 bg-white rounded\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 9\n        }\n      }, post.message), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 9\n        }\n      }, post.userName, \" posted at \", post.date, \" \"), (() => {\n        if (post.userId !== params.id) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(\"i\", {\n            id: \"likebtn\",\n            onClick: this.like,\n            className: \"heart fa fa-heart-o\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 11\n            }\n          }), /*#__PURE__*/React.createElement(\"h4\", {\n            id: \"likecount\",\n            className: \"count\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 11\n            }\n          }, this.state.count));\n        } else {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"row float-right\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(\"form\", {\n            \"data-id\": post._id,\n            onSubmit: this.delete,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(\"input\", {\n            className: \"btn btn-dark btn-sm custom-btn\",\n            type: \"submit\",\n            value: \"Delete\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }\n          })), /*#__PURE__*/React.createElement(\"form\", {\n            \"data-id\": post._id,\n            onSubmit: this.update,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(\"input\", {\n            className: \"btn btn-dark btn-sm custom-btn\",\n            type: \"submit\",\n            value: \"Edit\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }\n          })));\n        }\n      })())));\n    };\n\n    this.takeUserid = () => {\n      const {\n        match: {\n          params\n        }\n      } = this.props;\n      console.log(\"hey we are in takeUserid function and we are getting \");\n      console.log(params.id);\n      axios({\n        url: '/api/user/find',\n        method: 'POST',\n        data: params\n      }).then(response => {\n        var firstName = response.data.firstName;\n        this.setState({\n          firstName: firstName\n        });\n        console.log(this.state.firstName);\n      });\n    };\n\n    this.like = event => {\n      event.preventDefault();\n      $(\".heart.fa\").click(function () {\n        $(this).toggleClass(\"fa-heart fa-heart-o\");\n      });\n    };\n\n    this.state = {\n      post: '',\n      posts: [],\n      updateMessage: '',\n      isInEditMode: false,\n      updateID: '',\n      firstName: ''\n    };\n  }\n\n  // purpose of render is to display the specified HTML code inside the specified HTML element\n  render() {\n    console.log('State: ', this.state);\n\n    if (this.state.isInEditMode === false) {\n      $(\"#edit-posts\").hide();\n    } else {\n      $(\"#edit-posts\").show();\n    }\n\n    if (this.state.firstName !== undefined) {\n      console.log(this.state.firstName);\n      console.log(\"true\");\n      $(\".topsection\").show();\n    } else {\n      console.log('false');\n      $(\".topsection\").hide();\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"posts-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }\n    }, \"\\u2029\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"topsection\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body  main-post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"shadow-sm p-3 mb-5 bg-white rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"center\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 13\n      }\n    }, \" Hi \", this.state.firstName, \"! \")), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 15\n      }\n    }, \" Create a post... \"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.submit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      name: \"post\",\n      placeholder: \"Enter your post\",\n      className: \"form-control\",\n      cols: \"30\",\n      rows: \"3\",\n      value: this.state.post,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \" btn btn-dark btn-small custom-btn\",\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 19\n      }\n    })))))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newsfeed wrapper-main shadow-sm p-3 mb-5 bg-white rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 15\n      }\n    }, \"Timeline\"), this.displayPosts(this.state.posts))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"edit-posts\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.save,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-input card shadow-sm p-3 mb-5 bg-white rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }\n    }, \" Edit your post below... \"), /*#__PURE__*/React.createElement(\"textarea\", {\n      name: \"updateMessage\",\n      placeholder: \"Edit your post\",\n      className: \"form-control\",\n      cols: \"30\",\n      rows: \"3\",\n      value: this.state.updateMessage,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \" btn btn-dark btn-small custom-btn\",\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 19\n      }\n    }))))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/elizabethturney/Desktop/Acebook/my-app/src/components/posts.component.js"],"names":["React","$","axios","moment","Posts","Component","constructor","componentDidMount","takeUserid","console","log","state","firstName","getBlogPost","get","then","response","data","setState","posts","catch","handleChange","event","target","name","value","submit","preventDefault","match","params","props","post","message","date","format","userId","id","userName","count","url","method","finally","resetUserInputs","displayPosts","update","isInEditMode","post_id","dataset","updateMessage","updateID","_id","save","delete","length","map","index","like","click","toggleClass","render","hide","show","undefined"],"mappings":"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","sourcesContent":["import React from 'react';\nimport $ from 'jquery';\nimport axios from 'axios';\nimport moment from 'moment';\nimport '../App.css'\n\nexport default class Posts extends React.Component{\n\n  constructor() {\n    super();\n    this.state = {\n      post: '',\n      posts: [],\n      updateMessage: '',\n      isInEditMode: false,\n      updateID:'',\n      firstName:'',\n    };\n  }\n\n  componentDidMount = () => {\n    this.takeUserid();\n    console.log(this.state.firstName)\n    this.getBlogPost();\n  }\n\n  getBlogPost = () => {\n    axios.get('/api/posts')\n    .then((response) => {\n      const data = response.data\n      this.setState({posts: data})\n      console.log('Data has been received');\n    })\n    .catch(() => {\n      console.log('Error')\n    })\n  }\n\n  handleChange = (event) => {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n\n    this.setState({\n      [name]: value\n    });\n  };\n\n  submit = (event) => {\n    event.preventDefault();\n    const { match: { params } } = this.props;\n\n    const post = {\n      message: this.state.post,\n      date: moment().format(\"YYYY-MM-DD HH:mm\"),\n      userId: params.id,\n      userName: this.state.firstName,\n      count: this.state.count\n    };\n\n    axios({\n      url: '/api/posts',\n      method: 'POST',\n      data: post\n    })\n\n    .then(() => {\n      console.log('Data has been sent to there server');\n    })\n    .finally(()=> {\n      this.resetUserInputs();\n      this.getBlogPost();\n      this.displayPosts(this.state.posts);\n    })\n\n    .catch(() => {\n      console.log('Error');\n    });\n  }\n\n  update = (event) => {\n    event.preventDefault();\n    this.setState({isInEditMode: true})\n    const post_id = {\n      id: event.target.dataset.id\n    }\n\n    axios({\n      url: '/api/posts/retrieve',\n      method: 'POST',\n      data: post_id\n    })\n\n    .then((response) => {\n      this.setState({updateMessage: response.data.message, updateID: response.data._id})\n    })\n    .catch(() => {\n      console.log('Error')\n    })\n  }\n\n  save = (event) => {\n    event.preventDefault();\n    this.setState({isInEditMode: false})\n    const post = {\n      id: this.state.updateID,\n      message: this.state.updateMessage,\n      date: moment().format(\"YYYY-MM-DD HH:mm\"),\n      userName: this.state.firstName,\n      count: this.state.count\n    }\n\n    axios({\n      url: '/api/posts/update',\n      method: 'POST',\n      data: post\n    })\n    .then((response) => {\n      console.log(response.data)\n    })\n    .finally(()=> {\n      this.resetUserInputs();\n      this.getBlogPost();\n      this.displayPosts(this.state.posts);\n    })\n    .catch(() => {\n      console.log('Error')\n    })\n\n  }\n\n  delete = (event) => {\n    event.preventDefault();\n    const post_id = {\n      id: event.target.dataset.id\n    }\n\n    axios({\n      url: '/api/posts/delete',\n      method: 'POST',\n      data: post_id\n    })\n\n    .then(() => {\n      console.log('Data has been sent to be deleted');\n    })\n    .finally(()=> {\n      this.getBlogPost();\n      this.displayPosts(this.state.posts);\n    })\n    .catch(() => {\n      console.log('Error');\n    });\n  }\n\n  resetUserInputs = () => {\n    this.setState({\n       post: '',\n       updateMessage: '',\n       updateID: ''\n     });\n   };\n\n  displayPosts = (posts) => {\n    const { match: { params } } = this.props;\n    if (!posts.length) return null;\n    return posts.map((post, index) => (\n      <div key={index} className=\"card shadow-sm p-3 mb-5 bg-white rounded\">\n        <div className=\"card-body\">\n        <h4>{post.message}</h4>\n        <p>{post.userName} posted at {post.date} </p>\n        {(() => {\n          if (post.userId !== params.id) {\n          return(\n            <div>\n          <i id=\"likebtn\" onClick={this.like} className=\"heart fa fa-heart-o\"></i>\n          <h4 id=\"likecount\" className=\"count\">{this.state.count}</h4>\n          </div>)\n\n          } else {\n            return(\n            <div className=\"row float-right\">\n              <form data-id={post._id} onSubmit={ this.delete }>\n                <input className=\"btn btn-dark btn-sm custom-btn\" type=\"submit\" value=\"Delete\"/>\n              </form>\n              <form data-id={post._id} onSubmit={ this.update}>\n                <input className=\"btn btn-dark btn-sm custom-btn\" type=\"submit\" value=\"Edit\"/>\n              </form>\n            </div>)\n          }\n        })()}\n        </div> \n      </div>\n    ));\n\n  };\n\n  takeUserid = () => {\n    const { match: { params } } = this.props;\n    console.log(\"hey we are in takeUserid function and we are getting \")\n    console.log(params.id)\n    axios({\n      url: '/api/user/find',\n      method: 'POST',\n      data: params\n    }).then((response) => {\n      var firstName = response.data.firstName\n      this.setState({firstName: firstName})\n      console.log(this.state.firstName)\n    })\n  }\n\n  like = (event) => {\n    event.preventDefault()\n    $(\".heart.fa\").click(function() {\n    $(this).toggleClass(\"fa-heart fa-heart-o\");\n  });\n }\n\n\n\n// purpose of render is to display the specified HTML code inside the specified HTML element\n\n  render(){\n    console.log('State: ', this.state)\n    if(this.state.isInEditMode === false) {\n      $(\"#edit-posts\").hide()\n    }else{\n      $(\"#edit-posts\").show()\n    }\n    if(this.state.firstName !== undefined) {\n      console.log(this.state.firstName )\n      console.log(\"true\")\n      $(\".topsection\").show()\n    }else{\n      console.log('false')\n      $(\".topsection\").hide()\n    }\n\n    return(\n      <div className=\"posts-page\">\n        <div className=\"col-md-6 offset-md-3\"> \n          <div className=\"container\">\n            <div className = \"topsection\" >\n            <div className=\"card-body  main-post\">\n            <div className=\"shadow-sm p-3 mb-5 bg-white rounded\">\n            <center>\n            <h2> Hi {this.state.firstName}! </h2>\n           </center>\n              <h4> Create a post... </h4>\n              <form onSubmit={this.submit}>\n                <div className=\"form-input\">\n                  <textarea\n                    name=\"post\"\n                    placeholder=\"Enter your post\"\n                    className=\"form-control\"\n                    cols=\"30\"\n                    rows=\"3\"\n                    value={this.state.post}\n                    onChange={this.handleChange}>\n                  </textarea>\n                </div>\n                <div className=\"text-right\">\n                  <input className=\" btn btn-dark btn-small custom-btn\" type= \"submit\" value=\"Submit\"/>\n                </div>    \n              </form>\n            </div> \n          </div>\n        </div>\n          <br></br>\n\n          <div className=\"newsfeed wrapper-main shadow-sm p-3 mb-5 bg-white rounded\">\n            <div className=\"container\">\n              <h2>Timeline</h2>\n              {this.displayPosts(this.state.posts)}\n            </div>\n          </div>\n\n          <div id=\"edit-posts\">\n        \n            <form onSubmit={this.save}>\n              <div className=\"form-input card shadow-sm p-3 mb-5 bg-white rounded\">\n                <div className=\"card-body container\">\n                <h4> Edit your post below... </h4>\n                  <textarea\n                  name=\"updateMessage\"\n                  placeholder=\"Edit your post\"\n                  className=\"form-control\"\n                  cols=\"30\"\n                  rows=\"3\"\n                  value={this.state.updateMessage}\n                  onChange={this.handleChange}>\n                  </textarea>\n                </div>\n\n                <div className=\"text-right\">\n                  <input className=\" btn btn-dark btn-small custom-btn\" type=\"submit\" value=\"Submit\"/>\n                </div>    \n              </div>\n            </form>\n          </div>\n        </div>\n          </div>\n          \n      </div>\n        \n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}